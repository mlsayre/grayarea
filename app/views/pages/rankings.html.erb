<div class="gametop">Rankings</div>

<div class="rankbuttons">
	<button class="button ranktime rtweekly rankselected">Weekly</button>
	<button class="button ranktime rtalltime">All-time</button>
</div>

<div class="rankweeklycontent">
	<%= render "weeklyranks" %>
</div>

<div class="rankalltimecontent rankhidden">
	
</div>

<div class="centered">
	<button class="button returntomain">Return to Main</button>
</div>

<script>
$(".rtweekly").click(function() {
	$(".ranktime").removeClass("rankselected");
	$(this).addClass("rankselected");
	$(".rankweeklycontent").removeClass("rankhidden");
	$(".rankalltimecontent").addClass("rankhidden");
})
$(".rtalltime").click(function() {
	$(".ranktime").removeClass("rankselected");
	$(this).addClass("rankselected");
	$(".rankweeklycontent").addClass("rankhidden");
	$(".rankalltimecontent").removeClass("rankhidden");
})
$(window).on('turbolinks:load', function() {
	var curusername = "<%= current_user.username %>";
	$(".statcontainer li").each(function() {
  	if ($(this).data("uname") === curusername) {
  		$(this).css("color", "red").css("box-shadow", "red 0px 0px 3px 0px inset");
  	}
  })
	setTimeout(function() {
		var wrapper = $('.rankalltimecontent');
		wrapper.load("/pages/alltimeranks" + " .rankalltimecontent", function() {
		   wrapper.children('.rankalltimecontent').unwrap();
		   var curusername = "<%= current_user.username %>";
			  $(".statcontainer li").each(function() {
			  	console.log("checking " + curusername)
			  	if ($(this).data("uname") === curusername) {
			  		$(this).css("color", "red").css("box-shadow", "red 0px 0px 3px 0px inset");
			  	}
			  })

		});
	}, 250)
})
</script>