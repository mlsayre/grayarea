var ready=function(){function e(e){console.log("soundonoff running"+e),0===e?($(".soundon").text("Turn Sound On"),Howler.mute(!0)):($(".soundon").text("Turn Sound Off"),Howler.mute(!1))}function t(e){for(var t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[o],e[o]=n}return e}function o(e){setTimeout(function(){$(".word").eq(b[e]).removeClass("shrunken")},p+110)}function n(e){var t=/^[a-zA-Z\s]+$/,o=e.trim().split(/\s+/).length;return 0===e.length?(s("Please enter a hint word."),!1):e.length>28?(s("Please keep hint shorter than 29 characters. Reminder: just give one word or two words if it's somebody's name."),!1):e.match(t)?o>1?(s("Please make sure your hint is one word only."),!1):void 0:(s("Please make sure your hint contains letters only."),!1)}function s(e){$(".messagetitle").text("Oopies!"),$(".messageinfo").text(e),$(".messageaction").html('<button class="button closemessagebox">Return to game</button>'),$(".messagesubtext").text("Push button or click anywhere outside this box to continue."),$(".closemessagebox").click(function(){d()}),$(".pagecover").click(function(){d()}),$(".messagebox").show(),$(".pagecover").show()}function a(e,t){if(1===t)var o="word";else o="words";$(".messagetitle").text("Submit Hint?"),$(".messageinfo").html('You have entered the hint "'+e+'" which applies to <bold>'+t+"</bold> "+o+". Submit this hint and move to the final hint?"),$(".messageaction").html('<button class="button submithint1final">Submit Hint 1</button><button class="button closemessagebox">Cancel</button>'),$(".messagesubtext").text("Push cancel or click anywhere outside this box to cancel."),$(".submithint1final").click(function(){$(".hint1").hide(),$(".firstinfoword").text(e),$(".firstinfonum").text(t+" "+o),$(".hint2").show(),d()}),$(".closemessagebox").click(function(){d()}),$(".pagecover").click(function(){d()}),$(".messagebox").show(),$(".pagecover").show()}function i(e,t){if(1===t)var o="word";else var o="words";$(".messagetitle").text("Submit Second Hint?"),$(".messageinfo").html('You have entered the hint "'+e+'" which applies to <bold>'+t+"</bold> "+o+". Submit final hint and let people play the game?"),$(".messageaction").html('<button class="button submithint2final">Submit - Ready for Players!</button><button class="button closemessagebox">Cancel</button>'),$(".messagesubtext").text("Push cancel or click anywhere outside this box to cancel."),$(".submithint2final").click(function(){$.ajax({url:"/games/submithints",type:"POST",dataType:"json",data:{game_id:parseInt(u),word1:h,word1num:m,word2:c,word2num:w}}).always(function(){if(1===m)var e="word";else var e="words";if(1===w)var t="word";else var t="words";$(".hint2").hide(),$(".hintheadline").hide(),$(".submittedword1").text(h),$(".submittednum1").text(m+" "+e),$(".submittedword2").text(c),$(".submittednum2").text(w+" "+t),$(".submitted").show(),d()})}),$(".closemessagebox").click(function(){d()}),$(".pagecover").click(function(){d()}),$(".messagebox").show(),$(".pagecover").show()}function r(e){"true"===e||($(".messagetitle").text("Skip Second Hint?"),$(".messageinfo").html("No second hint needed to get all six words? Confirm to skip the second hint."),$(".messageaction").html('<button class="button submithint2final">Submit - Ready for Players!</button><button class="button closemessagebox">Cancel</button>'),$(".messagesubtext").text("Push cancel or click anywhere outside this box to cancel.")),$(".submithint2final").click(function(){$.ajax({url:"/games/submithints",type:"POST",dataType:"json",data:{game_id:parseInt(u),word1:h,word1num:m,word2:c,word2num:w}}).always(function(){if(1===m)var e="word";else var e="words";if(1===w)var t="word";else var t="words";$(".hint2").hide(),$(".hintheadline").hide(),$(".submittedword1").text(h),$(".submittednum1").text(m+" "+e),$(".submittedword2").text(c),$(".submittednum2").text(w+" "+t),$(".submitted").show(),d()})}),$(".closemessagebox").click(function(){d()}),$(".pagecover").click(function(){d()}),$(".messagebox").show(),$(".pagecover").show()}function d(){$(".messagebox").hide(),$(".pagecover").hide(),$(".messagetitle").html(""),$(".messageinfo").html(""),$(".messageaction").html(""),$(".messagesubtext").html("")}window.performance&&2==window.performance.navigation.type&&window.location.reload(),$(".menu").on("click",function(){$(".pagecover").show(),$(".menubox").show()}),$(".menuclose").on("click",function(){$(".pagecover").hide(),$(".menubox").hide()}),$(".pagecover").on("click",function(){$(".pagecover").hide(),$(".menubox").hide()});var l=gon.sound;e(l),$(".soundon").on("click",function(){l=1===l?0:1,e(l),$.ajax({url:"/games/soundonoff",type:"POST",dataType:"json",data:{sound:l}})});var u=$(".gametop").data("gameid"),h="",m=0,c="",w=0,g={0:0,1:10,2:20,3:35,4:50,5:70,6:100},f=["Keep it up!","Great work!","Keep it going!","Very nice!","Superb vocabulary!","Happy dance!","Next up!","Fantastic work!","Superb effort!","No end in sight!","This is making the highlight reel!"],b=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14];b=t(b);for(var p=120,v=0;v<b.length;v++)!function(){var e=p*(v+2);b[v];if(0!==$(".allwords").length){var t=v;setTimeout(function(){0===t?(wordshow0.on("play",o(t)),wordshow0.play()):1===t?(wordshow1.on("play",o(t)),wordshow1.play()):2===t?(wordshow2.on("play",o(t)),wordshow2.play()):3===t?(wordshow3.on("play",o(t)),wordshow3.play()):4===t?(wordshow4.on("play",o(t)),wordshow4.play()):5===t?(wordshow5.on("play",o(t)),wordshow5.play()):6===t?(wordshow6.on("play",o(t)),wordshow6.play()):7===t?(wordshow7.on("play",o(t)),wordshow7.play()):8===t?(wordshow8.on("play",o(t)),wordshow8.play()):9===t?(wordshow9.on("play",o(t)),wordshow9.play()):10===t?(wordshow10.on("play",o(t)),wordshow10.play()):11===t?(wordshow11.on("play",o(t)),wordshow11.play()):12===t?(wordshow12.on("play",o(t)),wordshow12.play()):13===t?(wordshow13.on("play",o(t)),wordshow13.play()):14===t&&(wordshow14.on("play",o(t)),wordshow14.play())},e)}}();if($(".submithint1").click(function(){var e=$(".hint1word").val();if(!1===n(e))return!1;h=e.toUpperCase(),m=parseInt($(".hint1number").val()),a(h,m)}),$(".submithint2").click(function(){var e=$(".hint2word").val();if(!1===n(e))return!1;c=e.toUpperCase(),w=parseInt($(".hint2number").val()),i(c,w)}),$(".skiphint2").click(function(){r("false")}),$(document).on("click",".returntomain",function(){window.location="/main"}),$(".hintenter").keyup(function(){$(this).val().length;$(this).val($(this).val().substring(0,28));$(this).val().length}),$(".hintenter").on("keypress",function(e){13===e.keyCode&&(e.preventDefault(),$(this).closest(".hints").find("button").first().click())}),$(".allwords").hasClass("guesswordslist")){(function(){function e(e,t){if(h.length>0)for(var o=0;o<h.length;o++)$("[data-guessword='"+h[o]+"']").addClass("guessedword");$(".guessedword").each(function(){var e=$(this).attr("data-guessword");-1!==n.indexOf(e)&&$(this).addClass("targetword"),s===e&&$(this).addClass("badword"),s!==e&&-1===n.indexOf(e)&&$(this).addClass("neutralword")}),k=g[p.length];var r=p.length;if(1===c&&(k=0,r=0),$(".wordcount").text(r),$(".scorecount").text(k),$(".thehintword").text(w),$(".thehintnum").text(b),1===b)var d="word";else var d="words";if($(".thewordword").text(d),w===i&&($(".skip1").text("Too risky? End game now."),$(".hintheadline").text("Your final hint is...")),"bonus,bonus"===m&&($(".hintheadline").text("Bonus! Go for one more?"),$(".guessword").remove(),$(".guessnum").text("This game's hints were "+a+" and "+i+".")),"over,over"===m){$("[data-guessword]").addClass("guessedword").addClass("neutralword");for(var o=0;o<n.length;o++)$("[data-guessword='"+n[o]+"']").removeClass("neutralword").addClass("targetword");$("[data-guessword='"+s+"']").removeClass("neutralword").addClass("badword"),1===c&&(k=0),setTimeout(function(){$(".hintheading").remove(),$(".submitted").removeClass("hidden");for(var t=0;t<h.length;t++)$("[data-guessword='"+h[t]+"']").addClass("finalguessesshow");0===c&&0!==e&&gameovergoodsfx.play(),$(".finalpoints"+l).text(k+" points")},e)}"true"!==t&&$.ajax({url:"/games/updategame",type:"POST",dataType:"json",data:{game_id:parseInt(u),guessedwords:h,guessstatus:m,gamespoiled:c,gamescore:k}}).always(function(){})}function t(t){h.push(t),$(".clickagain").removeClass("wordsubmitanim"),$(".reallysubmit").removeClass("reallysubmit"),-1!==n.indexOf(t)&&(p.push(t),w===i&&v.push(t),w===a&&p.length===b?($(".gamenotify").html("You found all the words for the first hint! On to the second hint..."),o(),w=i,b=d,m="hint2,word1"):6===p.length?($(".gamenotify").html("You got all six words! Very difficult to do... Well done!"),resultscheersfx.play(),o(),m="over,over"):w===i&&v.length===b?($(".gamenotify").html("You found all the words for the second hint! Try for one bonus word?"),o("bonus"),m="bonus,bonus"):w===i&&v.length===b+1?($(".gamenotify").html("You found all the words for the second hint!"),o(),m="over,over"):p.length<6&&($(".gamenotify").html(t+" is one of the six words you're looking for! "+f[Math.floor(Math.random()*f.length)]),o()),$("[data-guessword='"+t+"'] .anim_correct").fadeIn(200).addClass("animating"),setTimeout(function(){$("[data-guessword='"+t+"'] img.animating").fadeOut(1200,function(){$("[data-guessword='"+t+"'] img.animating").remove()})},1100),setTimeout(function(){$("[data-guessword='"+t+"'] div.animating").css("transform","translateY(-500%)").fadeOut(400,function(){$("[data-guessword='"+t+"'] div.animating").remove()})},3100),targetwordsfx.play(),e(4e3)),s===t&&($(".gamenotify").html("Oh no! "+t+' was the "Spoiler". Game over and all points lost.'),o(),m="over,over",c=1,$("[data-guessword='"+t+"'] .anim_spoiler").fadeIn(200).addClass("animating"),setTimeout(function(){$("[data-guessword='"+t+"'] img.animating").fadeOut(1200,function(){$("[data-guessword='"+t+"'] img.animating").remove()})},1100),setTimeout(function(){$("[data-guessword='"+t+"'] div.animating").css("transform","translateY(500%)").fadeOut(400,function(){$("[data-guessword='"+t+"'] div.animating").remove()})},3100),badwordsfx.play(),e(4e3)),-1===n.indexOf(t)&&s!==t&&(w===a?($(".gamenotify").html(t+" was not one of the target words. Moving on to the second hint..."),o(),w=i,b=d,m="hint2,word1"):w===i&&($(".gamenotify").html(t+" was not one of the target words. The game is now over."),o(),m="over,over"),$("[data-guessword='"+t+"'] .anim_neutral").fadeIn(200).addClass("animating"),setTimeout(function(){$("[data-guessword='"+t+"'] img.animating").fadeOut(1200,function(){$("[data-guessword='"+t+"'] img.animating").remove()})},1100),setTimeout(function(){$("[data-guessword='"+t+"'] div.animating").css("transform","translateY(200%)").fadeOut(400,function(){$("[data-guessword='"+t+"'] div.animating").remove()})},3100),neutralwordsfx.play(),e(4e3))}function o(e){$(".hintheadline").fadeOut(125,function(){$(".gamenotify").fadeIn(125)}),x=setTimeout(function(){$(".gamenotify").fadeOut(125,function(){$(".hintheadline").fadeIn(125)}),"bonus"===e&&bonusstartsfx.play()},4e3)}var n=gon.targetwords,s=gon.badword,a=gon.hintword1,i=gon.hintword2,r=gon.hintnum1,d=gon.hintnum2,l=gon.guessernum,h=gon.guessedwords;null===h&&(h=[]);var m=gon.guessstatus,c=gon.spoiler,w=a,b=r;"hint2"===m.split(",")[0]&&(w=i,b=d);for(var p=[],v=[],y=0;y<h.length;y++)-1!==n.indexOf(h[y])&&p.push(h[y]);var x,k=g[p.length];e(0,"true"),$(document).on("click",".firstclick",function(){var e=$(this).find("span").text();clearTimeout(x),$(".word").removeClass("unselected"),$(".word").addClass("firstclick"),$(".clickagain").removeClass("wordsubmitanim"),$(".reallysubmit").off("click").removeClass("reallysubmit"),$(this).find(".clickagain").addClass("wordsubmitanim"),$(this).addClass("reallysubmit").removeClass("firstclick"),$(".firstclick").addClass("unselected"),$(".reallysubmit").on("click",function(){t(e),$(".clickagain").removeClass("wordsubmitanim"),$(".reallysubmit").removeClass("reallysubmit"),$(".word").removeClass("unselected")})}),$(".skip1").click(function(){w===a?(w=i,b=d,m="hint2,word1"):m="over,over",e(4e3)})})()}};$(document).on("turbolinks:load",ready);